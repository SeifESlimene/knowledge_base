## ==Linux System Administration==

#### Linux Boot Process:
BIOS
: test underlying hardware components and load a bootloader.

Boot Loaders
: Start Operating System Using initrd
: - LILO : Old One
: - GRUB : New One

initrd (initial ram disk):
: temporary fs load into memory while the system boots (load modules until fs is mounted), once initrd mounts the actual fs, it's job is done.

/boot:
: The linux kernel, initrd and other files needed to boot the operating system are stored in /boot

vmlinux or vmlinuz:
: If the kernel is compressed it's name is vmlinuz.

---

#### Booting:
##### See messages that are logged when system is booting (generated by Linux Kernel):
> `$ dmesg`

The kernel ring buffer:
: is a data structure that records messages related to the operation of the kernel. A ring buffer is a special kind of buffer that is always a constant size, removing the oldest messages when new messages are received.

Because Of that fact need to see the content of this file:

`/var/log/dmesg`

runlevels and targets:
: init has runlevels while systemd has targets

telinit (init):
: control runlevels (what run level to use)

systemctl (systemd):
: alternative for telinit (init), we can use it to change to the desired target

##### Control the system:
shutdown

- Power off (halt) immediately:
> `$ shutdown -h now`

- Reboot immediately:
> `$ shutdown -r now`

- Reboot in 5 minutes:
> `$ shutdown -r +{{5}} &`

- Shutdown at 1:00 pm (Uses 24h clock):
> `$ shutdown -h 13:00`

- Cancel a pending shutdown/reboot operation:
> `$ shutdown -c`

reboot

poweroff

> `$ sudo vim /etc/default/grub`

##### Update `/boot/grub/grub.cfg`:

> `$ update-grub`

> `$ info -f grub -n 'Simple configuration'`

change `GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"` to `GRUB_CMDLINE_LINUX_DEFAULT=""` inside `/etc/default/grub` to enable verbose mode at boot
Found linux image: /boot/vmlinuz-5.4.0-81-generic
Found initrd image: /boot/initrd.img-5.4.0-81-generic
Found linux image: /boot/vmlinuz-5.4.0-73-generic
Found initrd image: /boot/initrd.img-5.4.0-73-generic
Found memtest86+ image: /boot/memtest86+.elf
Found memtest86+ image: /boot/memtest86+.bin
Found Windows 10 on /dev/nvme0n1p1

---

#### System Logging:
syslog standard
: central place for programs to log in one place instead of each program has it's own logging mechanism

Facilities:
: what part of system the message is originated from

Severities
: categorize messages based on their emergency

---

#### Disk Management - Partitions:
Partition Tables
: MBR - Master Boot Record => Up to 2TB of storage space
: GPT - GUID Partition Table => Up to 128 Partitions, and support storage devices up to 9.4 ZB

Mount points
: Directory used to access data on a partition, at least one partition mounted on the /
> `$ mkfs -t ext4 /dev/sdb3`

> `$ mkfs -t TYPE DEVICE`

> `$ mount /dev/sdb3 /opt`

> `$ mount DEVICE MOUNT_POINT`

> `$ df`

> `$ unmount MOUNT_POINT `

Or

> `$ unmount DEVICE; unmount /opt Or unmount /dev/sdb3`
##### control what filesystem get mounted where and in what order
> `$ /etc/fstab`
##### Viewing UUIDs and labels of storage devices attached to my system
> `$ lsblk -f`
##### Only UUIDs
> `$ blkid`
##### Set a label of a disk
> `$ e2label`

---

#### Managing Users and Groups:
**Contain user informations:** `/etc/passwd`
**User encrypted passwords are there:** `/etc/shadow`
**contain group informations**: `/etc/group`
- Create an account
> `$ useradd`
- Delete an account
> `$ userdel`
- Modify an account
> `$ usermod`
- Create a group
> `$ groupadd`
- Delete a group
> `$ groupdel`
- Modify a group
> `$ groupmod`
- Switch users
> `$ su`
- display my account name
> `$ whoami`
- Run program as superuser
> `$ sudo`
- Start a shell as another user
> `$ sudo -s`

Or

> `$ sudo su`
- Modify sudoers file
> `$ visudo`

---

#### TCP/IP Networking:
> `$ ip address`

> `$ ifconfig`

> `$ hostname`

> `$ hostname -f`

> `$ uname -n`

> `$ host`

> `$ dig`

> `$ cat /etc/network/interfaces`

> `$ ip`

> `$ ifconfig`

> `$ ifup`

> `$ ifdown`

`/etc/hosts`

`/etc/nsswitch.conf`

---

#### Jobs and Processes:
> `$ ps`

`Ctrl-c`

`Ctrl-Z`

> `$ bg`

> `$ fg`

> `$ jobs`

> `$ kill`

---

#### Scheduling Jobs with Cron:

Schedule cron jobs to run on a time interval for the current user

- Edit the crontab file for the current user:
> `$ crontab -e`

- Edit the crontab file for a specific user:
> `$ sudo crontab -e -u {{user}}`

- Replace the current crontab with the contents of the given file:
> `$ crontab {{path/to/file}}`

- View a list of existing cron jobs for current user:
> `$ crontab -l`

- Remove all cron jobs for the current user:
> `$ crontab -r`

- Sample job which runs at 10:00 every day (* means any value):
> `$ 0 10 * * * {{command_to_execute}}`

- Sample job which runs every minute on the 3rd of April:
> `$ * * 3 Apr * {{command_to_execute}}`

- Sample job which runs a certain script at 02:30 every Friday:
> `$ 30 2 * * Fri {{/absolute/path/to/script.sh}}`

---

#### Managing Softwares:

Debian package manager

- Install a package:
> `$ dpkg -i {{path/to/file.deb}}`

- Remove a package:
> `$ dpkg -r {{package_name}}`

- List installed packages:
> `$ dpkg -l {{pattern}}`

- List a package's contents:
> `$ dpkg -L {{package_name}}`

- List contents of a local package file:
> `$ dpkg -c {{path/to/file.deb}}`

- Find out which package owns a file:
> `$ dpkg -S {{filename}}`

---

PATH:
/bin
/sbin
/usr/bin
/usr/sbin
/usr/local/bin
/usr/local/sbin
/home/seifeslimene/.local/bin
/usr/games
/usr/local/games
/snap/bin
/home/seifeslimene/.rbenv/bin
/home/seifeslimene/.rbenv/shims
/home/seifeslimene/.nvm/versions/node/v10.24.1/bin

---

Command to execute: /sbin/init splash
in /bin: systemd -> /lib/systemd/systemd*
in /sbin: init -> /lib/systemd/systemd*
in usr/bin: systemd -> /lib/systemd/systemd*
